---
title: 抽离组件的N中情况
date: 2022-10-17 17:38:08
permalink: /pages/08a951/
categories:
  - 技术
  - vue
tags:
  - 
---

# 抽离组件的N中情况

抽离组件能得到什么呢？或者说什么是动态的，什么是静态的？

在vue的template中，html是固定的，但可以通过v-if、v-show、v-for、prop、data来修改html元素。

因此，vue的template是存在较大局限性的，一旦确定html，那么就不易过多的添加v-if和v-show判断，否则势必造成template臃肿。

也可以说，vue的template不适合大量判断条件，差异变动大的抽离。其本身就具备了高耦合的特性。

:::tip
高耦合指的是对某一种事务的处理。但并不阻碍其具备扩展性的特性。因为除了html本身结构外，还有样式、文本这种高扩展的变化在。
:::

<!-- more -->

## HTML本身具备高度固定性且存在复用

简单来说就是，可复用性，但没有很大结构变体。不存在v-show、v-if判断条件，而是一些text，style的不同。

存在复用的情况，此类，无论大小，都应该抽离出去。

## 体积庞大

体积大，首先要考虑是否有方法降低，代码编写的数量。一般都会存某个方法可以解决这个问题。

一旦解决了体积大的问题，就可以再结合“HTML本身具备高度固定性且存在复用”的观点，决定是否抽离。

## 解决某一种问题具备高可用性

这一类一般都是工具组件，例如图片预览、便捷标签、固定的逻辑交互。且常便随着Script的高度固定性。

通过固定解析和Html来达到复用的可能。但也就意味着极低的扩展性。

:::tip
如果要对html的固定性做扩展，推荐新建一个组件保证功能相同但html变化，独立使用。非要做一个统一和黑盒组件，可以利用js的形式通过render渲染。
:::

## 隔离变量、替代watch监听

这种情况不在于复用，在于代码结构变得清晰，降低代码难度。

如，在一个循环面板中，返回的数据中有一个字段，包含了用逗号隔开的“图片Id”。图片的预览又需要的利用id再次调用文件服务获取url。

你或许会在请求获得“图片Id”后，直接for调用文件服务，最终将数据挂载。但你有一个更好的方案。

将图片Id作为prop传给子组件，子组件主动调用文件服务获取数据后展示。（这样，你就不需要处理复杂for循环，也避免首次请求多次的问题）。

在for循环中，修改数据在父组件单独处理会变得很痛苦。通过子组件做一次数据隔离，最后映射到父组件中，也让事情变得简单很多。