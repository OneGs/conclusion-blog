---
title: 响应式开发理解
date: 2023-05-13 17:13:19
permalink: /pages/7a59b0/
categories:
  - 技术
  - 问题解决方案
tags:
  - 
---

# 响应式开发理解

<img src="/img/responsive.png" style="width: 100%" />

响应式开发日渐复杂，注意适配不太可能，因此选择一个范围很重要。

* 小变化、大改动：有些影响高宽、有些则可能影响整体布局
* 组件响应式：响应式的最小颗粒度
* 缩放布局 or 流式布局 or 响应式布局

<!-- more -->

## 制定目标（确认用户设备的屏幕尺寸区间）

首要要明确没有100%适配的系统。只有适配最符合需求的设备才是性价比最高的。

常见的适配需求包括：手机端、平板端以及Pc端。这三者之间的布局跨度会较为明显，需要单独设计。

在中台应用中，可以不考虑手机和平板端，而是更加关注最小的PC端显示即可，这就将难度明显降低了。
而三端同时适配的情况更多的出现在内容展示平台。今天只分析PC端。

* 最小分辨率：1366 * 768
* 最大分辨率：1920 * 1080

尽管1440是事业单位最常用的分辨率，但1366在市面上的占有率为20%，为其做好适配显然可以在市场上应对的更加轻松。

1920属于大型屏幕了，同时也是开发过程中的一个基准，由于这两者之间差距过大，可以在中间设置一个缓冲分辨率，让显示和动画过度变得更丝滑。

现得到的结论为：**以最大分辨率为基准进行开发，优雅降级适配其它分辨率**。

## 整体布局变动

整体布局变动发生在宽度出现明显变化，内容按原有布局显示会造成内容缺失或阅读困难的时候。此时需要对布局重新排布，同时也要设计师针对性的重新设计。

如侧边栏是否隐藏，而采用抽屉式、某些部分可以不展示、发生换行等。理论上，设计师需要对此做出说明，开发者才好做出应变。

整体布局变动的最小颗粒度可以是组件。最外层控制了整体布局，而组件又根据宽度确定了组件内元素的整体布局。

组件响应式也是很多第三方库所具备的能力，如vuetify等。

**确定不同分辨率下整体布局的差异，在开发过程中针对组件也要做好响应式**

## 固定宽度和响应宽度

页面上总不会任何元素都需要进行响应式变化。

有些元素总是需要重点展示，响应式变化可能造成内容展示不全或浏览效果不加，因此需要固定宽度。

固定好的重要元素后，再针对响应式内容进行处理即可。

## 响应式技术

说了那么多最终还是得聚焦到技术上。

在size发生变化时，最终变化的永远是宽度，因此需要聚焦宽度的响应。

### 媒体查询

媒体查询是常用的响应式方法。能够更具断点设置不同的样式来具体改变样式。

常见的断点有：1366、1440、1560、1920。

不管是移动优先还是PC优先，都是依据当随着屏幕宽度增大或减小的时候，后面的样式会覆盖前面的样式。因此，移动端优先首先使用的是min-width，PC端优先使用的max-width。

也可以说，PC上优雅降级、手机上渐进升级。

### 百分比

百分比设置在缩放变化时能够保证宽度的等比缩放，这在整体布局时是不错的方式。

**常用在较宽的布局上，而不是字体大小上。**

### rem

为满足字体大小变化时，固定宽度也可以进行缩放变化时，就可能需要rem了。

rem是基于根节点font-size的大小来变化的。当页面发生变化，字体变化后，对应设置的宽度也会发生变化。

**其更适合固定宽度的地方。**

### 响应式图片

响应式图片则推荐使用`max-height`完成等比例缩放，而非`width`。

另外在PC端和手机端切换时，手机端使用PC端的图片会白白浪费流量，因此可以使用`srcset`属性。

当然也可以使用`background-image`和媒体查询配合使用达到目的。如：
```css
.banner{
  background-image: url(/static/large.jpg);
}

@media screen and (max-width: 767px){
  background-image: url(/static/small.jpg);
}
```

如果浏览器不支持`srcset`，可以使用`picturefill.min.js`做后备补充。

### flex布局

flex布局是W3C针对响应式布局提出解决方案，目的是降低响应式开发难度。

flex在针对变体（换行等）时是不错的选择。但缺点是兼容性不太好（相对于旧浏览器，现代浏览器已经能很好的支持了）

### 格栅布局

格栅布局是社区提供的一个解决方案，其原理是将页面分成多分，然后根据屏幕的大小命中不同的分数。

如bootstrap、elementUi都提供了对应的格栅系统。缺点是写法较为复杂。

## 参考

1. [响应式开发心得](https://juejin.cn/post/6844903479681499150)
2. [实用干货！聊聊3种最常见的响应式设计问题](https://www.uisdc.com/3-responsive-design-disasters)
3. [看懂了！第一次见到把响应式布局讲得这么清晰的！](https://www.uisdc.com/responsive-layout)
4. [前端响应式布局原理与方案（详细版）](https://juejin.cn/post/6844903814332432397)
5. [2020 年 8 月至 2021 年 8 月全球桌面屏幕分辨率统计数据](https://www.dowv.com/news/175.html)
6. [Responsive Web Design: What It Is And How To Use It](https://www.smashingmagazine.com/2011/01/guidelines-for-responsive-web-design/)：很好的介绍了响应式方案有哪些，并给出了的具体举例
7. [Responsive design](https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Responsive_Design)