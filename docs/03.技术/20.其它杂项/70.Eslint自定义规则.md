---
title: Eslintè‡ªå®šä¹‰è§„åˆ™
date: 2023-02-20 19:02:47
permalink: /pages/72c857/
categories:
  - æŠ€æœ¯
  - å…¶å®ƒæ‚é¡¹
tags:
  - 
---

# Eslintè‡ªå®šä¹‰è§„åˆ™

eslintæ˜¯ä»£ç è§„èŒƒå·¥å…·ï¼Œèƒ½å¤Ÿå®æ—¶æ£€æµ‹ä»£ç å­˜åœ¨çš„æ ·å¼é”™è¯¯ã€‚è®©ä»£ç æ ·å¼åŒ–ã€ç»Ÿä¸€åŒ–ï¼Œæé«˜è¯­ä¹‰æ€§ã€å¯è¯»æ€§ã€‚

eslinté»˜è®¤æä¾›äº†å¾ˆå¤šruleæ¥è§„èŒƒä»£ç ï¼ŒåŒæ—¶ä¹Ÿæœ‰ä¸°å¯Œå¤šå½©çš„ç¬¬ä¸‰æ–¹ruleä¸æ–­åŠ å…¥åˆ°å¤§çš„ç”Ÿæ€ä¸­æ¥ã€‚

ä½†æˆ–å¤šæˆ–å°‘ï¼Œå®ƒä»¬å¹¶ä¸èƒ½100%çš„è§£å†³åœ¨å¼€å‘ä¸­æ‰€é‡åˆ°çš„å®šåˆ¶åŒ–é—®é¢˜ã€‚å¦‚ï¼Œè¡¨æ ¼å­—æ®µçš„æŒ‰ç…§ä¸€å®šçš„é¡ºåºæ’åˆ—ï¼ˆäººã€çŠ¶æ€ã€å•ä½ã€ç»„ç»‡ã€æ—¶é—´ï¼‰ã€
æŸä¸€åˆ—å­—æ®µå±äºå¿…å¡«é¡¹ï¼Œä½†æœªä½œå¿…å¡«æ ¡éªŒã€‚

åœ¨åºå¤§çš„é¡¹ç›®ä¸­ï¼Œé€šè¿‡äººå·¥æ‰‹åŠ¨åœ°æ£€æŸ¥ï¼Œä¿®æ”¹ï¼Œæ— ç–‘æ˜¯ä¸€é¡¹è€—æ—¶ã€è€—åŠ›çš„å·¥ä½œï¼ŒåŒæ—¶æ— æ³•ä¿è¯å®Œæ•´çš„æ’æŸ¥å®Œæ¯•ã€‚

ä¸ºæ­¤ï¼Œé€šè¿‡å®šåˆ¶åŒ–çš„eslint ruleæ›¿æˆ‘ä»¬æ£€æŸ¥å‡ºé—®é¢˜ï¼Œåœ¨ç¼–å†™çš„è¿‡ç¨‹ä¸­å³å¯é¿å…é—®é¢˜ã€‚åˆ©ç”¨fixæ›´èƒ½ä¸€é”®ä¿®å¤ï¼Œä½•ä¹è€Œä¸ä¸ºå‘¢ã€‚

å¼€å‘eslint ruleå‰ï¼Œä½ éœ€è¦çŸ¥é“eslintæ˜¯å¦‚ä½•é…ç½®ã€ä½¿ç”¨çš„ï¼å¦‚æœä¸æ¸…æ¥šè¯·å…ˆé˜…è¯»[å®˜æ–¹æ–‡æ¡£](https://eslint.org/docs/latest/use/getting-started)ã€‚

é‚£ä¹ˆè®©æˆ‘ä»¬å‡†å¤‡å¼€å§‹å§ã€‚æŒ‰ç…§çŸ¥è¯†ç‚¹å¤§è‡´åˆ—ä¸€ä¸‹çš„å¤§çº²ï¼š
1. ASTæ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬æ€ä¹ˆä¿®æ”¹å®ƒï¼Ÿ
2. eslint ruleçš„åˆ›å»ºã€æµ‹è¯•å’Œè¿ç”¨ï¼
3. eslintæ˜¯å¦‚ä½•ä¿®å¤ä»£ç çš„ï¼Ÿ

<!-- more -->

## ASTæ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬æ€ä¹ˆä¿®æ”¹å®ƒï¼Ÿ

å’±ä¸å»è°ˆä»€ä¹ˆè¯æ³•è§£æã€è¯­æ³•è§£æç­‰ç‰›é€¼è¯è¯­ï¼Œç›´æ¥äº†å½“çš„è§£é‡Šã€‚

å¯¹äºæ–°æ‰‹è€Œè¨€ï¼ŒASTå°±æ˜¯ä¸€å¥—å·¥å…·ï¼Œèƒ½å¤Ÿå°†ä¸€ä¸²stringè½¬åŒ–æˆç±»ä¼¼Dom Treeçš„nodeæ ‘ï¼Œç„¶åä½ å¯ä»¥æ“ä½œè¿™æ£µæ ‘è¿›è¡Œæ·»åŠ ã€åˆ é™¤ã€æ›¿æ¢ç­‰æ“ä½œï¼Œ
æœ€åå†ä»nodeæ ‘è½¬åŒ–æˆstringäº¤ç»™jsæ‰§è¡Œã€‚

å†ç®€å•ç‚¹ï¼šASTå…è®¸å¯¹ä»£ç è¿›è¡Œæ“ä½œå¹¶æ‰§è¡Œã€‚

æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿæˆ‘ä»¬æ•²ä»£ç ä¸å°±æ˜¯åœ¨åšè¿™ç§äº‹æƒ…ï¼Ÿå½“ç„¶æ˜¯æ‰¹é‡å¯¹ä»£ç è¿›è¡Œä¿®æ”¹å•¦ï¼Œè¿™æ ·å°±ä¸éœ€è¦ç¨‹åºå‘˜è‹¦è‹¦çš„æ‰‹åŠ¨å»ä¿®æ”¹é‡å¤æ€§ä»£ç äº†ï¼Œå¤šå¥½å•Šã€‚

ç½‘ä¸Šæœç´¢äº†å¥½å¤šASTç›¸å…³çš„çŸ¥è¯†ï¼Œå…¨éƒ¨éƒ½æ˜¯ä»‹ç»ASTæ˜¯å•¥çš„ï¼Ÿå…·ä½“æ€ä¹ˆä½¿ç”¨è¿˜æ˜¯ä¸€å¤´é›¾æ°´ï¼Ÿåªèƒ½è¯´ç°åœ¨å¤§å®¶æ›´å¤šå…³æ³¨çš„æ˜¯å®ƒæ˜¯ä»€ä¹ˆï¼Œè€Œä¸å»è¯´å®ƒè¦æ€ä¹ˆåšï¼

å¥½å§ï¼Œé‚£è®©æˆ‘ä»¬æ¥è¡¥ä¸ŠæŠŠï¼š

### å¦‚ä½•æ“ä½œASTï¼Ÿ

æ—¢ç„¶çŸ¥é“äº†ASTæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œé‚£ä¹ˆå°±å»æŠŠå·¥å…·æ‰¾å‡ºæ¥ã€‚

æ€ä¹ˆæœå‘¢ï¼Ÿ

ç›´æ¥è¾“å…¥ï¼šjs astï¼Ÿå¥½åƒä¸è¡Œï¼Œå…¨æ˜¯ä»‹ç»ASTæ˜¯ä»€ä¹ˆï¼Œå†å¤šç‚¹å°±æ˜¯å‘Šè¯‰ä½ åˆ©ç”¨babelå¯ä»¥åšä»£ç è½¬æ¢ã€‚

![Eslint-custom-rule-2.png](../../.vuepress/assets/images/Eslint-custom-rule-2.png)

è¾“å…¥ï¼šastæœ‰å“ªäº›è½¬æ¢å™¨ï¼Ÿè¿˜æ˜¯ä¸è¡Œå•Šï¼Œå…¨æ˜¯æ–­æ–­ç»­ç»­çš„å†…å®¹ã€‚

![Eslint-custom-rule-2.png](../../.vuepress/assets/images/Eslint-custom-rule-1.png)

å¥½å§ã€‚é‚£è®©å’±æ¥ä»‹ç»ä¸€ä¸‹å§ã€‚

å’±ä¹‹å‰è¯´ï¼Œastå…¶å®å°±æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œè¿™ä¸ªå·¥å…·çš„åå­—ä¸“ä¸šç‚¹å«åšè§£æå™¨ã€‚åœ¨æ–‡ç« ä¸­ï¼Œå¸¸èƒ½çœ‹åˆ°äººæ‹¿babelæ¥è¯´äº‹ã€‚

babelåœ¨è¿™é‡Œå°±å«åšè§£æå™¨ã€‚ä½†è§£æå™¨æ˜¯å¦åªæœ‰è¿™ä¸€ç§å‘¢ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œåœ¨eslintçš„configæ–‡ç« ä¸­èƒ½çœ‹åˆ°å¦‚ä¸‹ä¸€å¥è¯ï¼š

![Eslint-custom-rule-2.png](../../.vuepress/assets/images/Eslint-custom-rule-3.png)

> By default, ESLint uses Espree as its parser. You can optionally specify that a different parser should be used in your configuration file if the parser meets the following requirements:

é»˜è®¤åœ°ï¼Œeslintä½¿ç”¨Espreeä½œä¸ºè§£æå™¨ã€‚

å’±å¯ä»¥çŸ¥ï¼šASTè§£æå™¨æœ‰å¾ˆå¤šç§ï¼Œå¯ä»¥å°†å¤šç§ä¸åŒcodeè§£ææˆnode treeã€‚

å¸¸è§çš„ASTè§£æå™¨æœ‰ï¼šï¼ˆå’±è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå°æŠ€å·§ï¼šåœ¨æµè§ˆå™¨è¾“å…¥æ¡†è¾“å…¥ Espree vsè¯•è¯•ğŸ¤£ï¼‰


1. Espreeï¼šeslinté»˜è®¤ã€‚ 
2. Esprima: å¸¸è§ã€‚
3. babel/parseï¼šbabelé»˜è®¤ã€‚ 
4. vue-eslint-parserï¼šè§£ævue templateã€‚

å¥½ï¼Œç°åœ¨çŸ¥é“äº†æœ‰å“ªäº›ASTå·¥å…·äº†ï¼Œé€‰ä¸€ä¸ªå¸¸ç”¨çš„recastå·¥å…·ï¼ˆé‡‡ç”¨ Esprima è§£æå™¨ï¼‰ï¼Œè¿›å…¥[github](https://github.com/benjamn/recast)çœ‹ä¸€ä¸‹ç¤ºä¾‹ï¼š

:::tip
recastæ˜¯å¯¹ASTè§£æå™¨çš„æ›´é«˜å±‚æ¬¡å°è£…ï¼Œæä¾›äº†æ›´å¤šçš„å·¥å…·å‡½æ•°å¯¹ASTè¿›è¡Œæ“ä½œã€‚Esprimaåªæ˜¯ç”¨äºå¯¹codeè¿›è¡Œè§£æã€‚
:::

```javascript
import * as recast from "recast";

// The string code
const code = [
  "function add(a, b) {",
  "  return a +",
  "    // Weird formatting, huh?",
  "    b;",
  "}"
].join("\n");

// parse code
const ast = recast.parse(code);
```

å—¯ï¼å¾ˆç®€å•å˜›ï¼`parse`æ˜¯è§£æã€‚è¦è½¬å›stringï¼Œç”¨`print`å°±å¥½äº†ã€‚

é‚£è®©å’‹æŠŠå‡½æ•°åæ”¹ä¸º"addPlus"è¯•è¯•æ‰‹ã€‚

...

è¿™å¯å’‹æ”¹å•Šï¼Œå•¥éƒ½ä¸äº†è§£å•Šï¼ast treeå•¥æ ·éƒ½ä¸çŸ¥é“ï¼Œå’‹åšä¿®æ”¹å‘¢ï¼Ÿ

é‚£å†æ¥çœ‹çœ‹ast treeä¼šå˜æˆä»€ä¹ˆæ ·å­å§ï¼

### AST Treeé•¿ä»€ä¹ˆæ ·ï¼Ÿ

å’±çŸ¥é“ï¼Œastè§£æå™¨å¤šç§å¤šæ ·ï¼Œæ€»ä¸èƒ½è§£æå‡ºæ¥ast treeå…¨éƒ½ä¸åŒï¼Œå’‹ä¸ªå…¼å®¹ä½¿ç”¨å‘¢ï¼Ÿä¸ºæ­¤esæä¾›äº†å…·ä½“çš„æ ‡å‡†ï¼Œä¾›å¤§å®¶å‚è€ƒå®ç°ã€‚

æ‰€ä»¥å¤§è‡´ä¸Šast treeè§£æå‡ºæ¥æ˜¯ç›¸è¿‘çš„ï¼Œé™¤äº†ä¸€äº›è‡ªå®šä¹‰çš„codeã€‚

è¿™é‡Œæ¨èä½¿ç”¨ï¼š[astexplorer](https://astexplorer.net/) åœ¨çº¿è§£æå·¥å…·ï¼Œå¯é€‰æ‹©ä¸åŒè¯­è¨€ï¼Œä¸åŒè§£æå™¨ï¼Œç›´æ¥åœ°å°†è§£æç»“æœæ˜¾ç¤ºåœ¨å³ä¾§ã€‚

![Eslint-custom-rule-2.png](../../.vuepress/assets/images/Eslint-custom-rule-4.png)

å°†ä¸Šè¿°ä»£ç stringç²˜è´´åˆ°å·¦ä¾§ä»£ç åŒºï¼Œç‚¹å‡»åˆ°addä¸Šã€‚å¯ä»¥çœ‹åˆ°å·¦ä¾§ç»“æœä¸ºï¼š

![Eslint-custom-rule-2.png](../../.vuepress/assets/images/Eslint-custom-rule-5.png)

å°è¯•ä¿®æ”¹ä¸€ä¸‹ï¼š

```javascript
import * as recast from "recast";

// The string code
const code = [
    "function add(a, b) {",
    "  return a +",
    "    // Weird formatting, huh?",
    "    b;",
    "}"
].join("\n");

// parse code
const ast = recast.parse(code);
// body[0] è¡¨ç¤ºç¬¬ä¸€ä¸ªé€‰ä¸­çš„å‡½æ•°è¡¨è¾¾å¼
// id ä¸ºæ ‡è¯†ç¬¦
// name ä¸ºæ ‡è¯†ç¬¦åç§°ï¼Œä¿®æ”¹ç›®æ ‡
ast.body[0].id.name = 'addPlus'
console.log(recast.print(ast))
```

ä¿®æ”¹æˆåŠŸï¼

ä½†æ˜¯å¦‚æœå­˜åœ¨å¤šä¸ªå‡½æ•°ï¼Œè¯¥æ€ä¹ˆæŸ¥æ‰¾ä¿®æ”¹çš„å…·ä½“ä½ç½®å‘¢ï¼Ÿæ€»ä¸èƒ½ç»§ç»­é€šè¿‡ä¸æ–­çš„keyæ¥å®šä½å§ã€‚

recastå…è®¸å¯¹domèŠ‚ç‚¹è¿›è¡Œéå†ï¼Œå¹¶é€šè¿‡typeå®šä¹‰åœ¨éå†åˆ°æŒ‡å®šçš„typeæ—¶æ‰§è¡Œç›¸å…³ä»£ç ã€‚

```javascript
import * as recast from "recast";

// The string code
const code = [
    "function add(a, b) {",
    "  return a +",
    "    // Weird formatting, huh?",
    "    b;",
    "}"
].join("\n");

const ast = recast.parse(code);

ast.visit(ast, {
    visitIdentifier(path) {
        const node = path.node // get node
        if(node.id.name === 'add') { // if name equal with add
            node.id.name = 'addPlus' // modify add name to addPLus
            return false // stop depth
        }
        this.traverse(path) // continue
    }
})

console.log(recast.print(ast))
```

recaståˆ©ç”¨visitå‡½æ•°å¯¹astè¿›è¡Œéå†ï¼Œåœ¨Identifierç±»å‹æˆ‘ä»¬è®¾ç½®äº†å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨è®¿é—®åˆ°Identifierç±»å‹èŠ‚ç‚¹æ—¶æ‰§è¡Œã€‚

æˆ‘ä»¬å¯ä»¥åˆ¤æ–­å½“å‰æ ‡è¯†ç¬¦æ˜¯å¦ä¸ºaddï¼Œä»è€Œåšå‡ºä¿®æ”¹ã€‚å¦‚æ­¤ï¼Œç¡¬ç¼–ç å°±å˜æˆäº†æ´»çš„ã€‚

æ¥ä¸‹æ¥ä½ åˆä¼šè¯´ï¼šast treeéƒ½æœ‰å“ªäº›èŠ‚ç‚¹å‘¢ï¼Ÿæˆ‘æ€»ä¸èƒ½å…¨éƒ¨è®°ä¸‹æ¥å§ã€‚

å½“ç„¶ä¸éœ€è¦ï¼Œå–„ç”¨[astexplorer](https://astexplorer.net/)å¾ˆå®¹æ˜“å°±èƒ½çŸ¥é“ç±»å‹äº†ã€‚ä½†å¦‚æœä½ æƒ³çŸ¥é“ç±»å‹åçš„å…·ä½“å«ä¹‰ï¼Œ[es5-types](https://github.com/estree/estree/blob/master/.md)èƒ½å¤Ÿç»™ä½ è§£ç­”ã€‚

recasté™¤äº†æä¾›éå†åŠŸèƒ½å¤–ï¼Œè¿˜æœ‰buildersç”¨äºå¯¹nodeèŠ‚ç‚¹çš„æ„å»ºï¼ˆç±»ä¼¼äºdomçš„createElementï¼‰ï¼Œå½“ç„¶recastæ˜¯é‡‡ç”¨äº†[ast-types](https://github.com/benjamn/ast-types)ï¼Œæƒ³è¦çŸ¥é“å…·ä½“ç”¨æ³•ï¼Œä½ éœ€è¦æŸ¥çœ‹è¯¥æ–‡æ¡£ã€‚

è‡³æ­¤ï¼š

1. ä»ASTå¤§è‡´æ˜¯ä¸ªå•¥ï¼Ÿ
2. åˆ°å¦‚ä½•å¦‚ä½•åŸºæœ¬ä½¿ç”¨ASTå·¥å…·ï¼
3. å†åˆ°ASTå­˜åœ¨å“ªäº›ç±»å‹ï¼

éƒ½èƒ½å¤Ÿçš„ä¸²è”èµ·æ¥äº†ï¼Œä¸è‡³äºä¸€å¤´é›¾æ°´ï¼Œå°±æ˜¯æ¶‰åŠçš„ä¸œè¥¿å¤šäº†ç‚¹ï¼Œå¤šçœ‹çœ‹å¤šè¯•è¯•å§ã€‚é‚£ä¹ˆå›å½’ä¸»é¢˜ï¼Œå¼€å‘eslint ruleså§ã€‚

## eslint ruleçš„åˆ›å»ºã€æµ‹è¯•å’Œè¿ç”¨ï¼

eslintæ˜¯å¯¹astä¸€é¡¹è¿ç”¨ï¼Œä¹Ÿæ˜¯åœ¨é¡¹ç›®å·¥ç¨‹åŒ–è¿‡ç¨‹ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚ä¸ºäº†è¾¾åˆ°å®šåˆ¶åŒ–ï¼Œè‡ªå®šä¹‰è§„åˆ™åŠ¿åœ¨å¿…è¡Œã€‚

å…ˆæ¥å¤§æ¦‚è¯´ä¸€ä¸‹åŸç†ï¼š

å†äº†è§£äº†aståï¼Œæˆ‘ä»¬èƒ½çŒœæµ‹å‡ºeslintå¤§æ¦‚åšäº†ä»€ä¹ˆäº‹æƒ…â€”â€”è§£æcodeï¼Œå¯¹èŠ‚ç‚¹éå†ï¼Œæ ¹æ®ruleé…ç½®å¯¹èŠ‚ç‚¹è¿›è¡Œæ“ä½œï¼Œæœ€åè¾“å‡ºstring codeã€‚

eslintå…¶å®å°±æ˜¯åšäº†è¿™ä¹ˆä¸€ä¸ªäº‹æƒ…ã€‚ä¸ºäº†äº†è§£çš„æ›´åŠ æ¸…æ™°ï¼Œå†æ¥æ›´åŠ ç»†åŒ–ä¸€ä¸‹ï¼š

1. å°†codeé€šè¿‡Espreeè½¬åŒ–ä¸ºASTã€‚
2. éå†ASTæ”¶é›†èŠ‚ç‚¹ï¼Œå°†ASTæ‹å¹³æˆä¸ºæ•°ç»„AST_ARRã€‚
3. éå†ruleé›†åˆä¸ºå¯¹åº”çš„èŠ‚ç‚¹æ·»åŠ äº‹ä»¶ã€‚
4. éå†AST_ARRæ‰§è¡Œå¯¹åº”äº‹ä»¶ï¼Œæ­¤å¤„åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯ä»ä¸Šå¾€ä¸‹ï¼Œä¸€ç§æ˜¯å†’æ³¡æ‰§è¡Œã€‚æ­¤æ—¶å·²ç»èƒ½å¤Ÿè·çš„æŠ¥é”™ä¿¡æ¯äº†ã€‚
5. å¦‚æœè¦ä¿®å¤çš„åŒ–ï¼Œéå†Fixerå®Œæˆä¿®å¤å·¥ä½œã€‚

çŸ¥é“äº†å¤§è‡´çš„å·¥ä½œåŸç†ï¼Œé‚£å°±å¼€å§‹å®è·µï¼š

### åˆ›å»ºrule create

åœ¨ä»»æ„ä¸€ä¸ªåŒ…å«eslintçš„é¡¹ç›®å†…ï¼Œæ‰“å¼€.eslintæ–‡ä»¶ã€‚å¯ä»¥çœ‹åˆ°ruleè¢«å®šä¹‰ä¸ºäº†{ key: string }çš„å½¢å¼ã€‚

è¿™æ˜¯å› ä¸ºeslintä¼šå»require('string')æ‰¾åˆ°å¯¹åº”çš„å®šä¹‰ã€‚

å¦‚æœæˆ‘ä»¬å¼€å‘çš„è¯ï¼Œç›´æ¥å®šä¹‰ä¸ºæ ‡å‡†æ¨¡å¼å³å¯ã€‚

```javascript
module.exports = {
    rules: {
        'custom-rule': {
            meta: {
                type: 'suggestion', // `problem`, `suggestion`, or `layout`
                docs: {
                    description: "description",
                    categories: ['recommended'],
                    url: null, // URL to the documentation page for this rule
                },
                fixable: 'code', // Or `code` or `whitespace`
                schema: [
                    {
                        type: 'array',
                    }
                ], // Add a schema if the rule has options
            },
            create(context) {
                return {
                    Identifier(node) {
                        // do any thing
                    }
                }
            }
        },
    }
}
```

é¦–å…ˆè®¾ç½®äº†metaçš„ä¸€äº›ä¿¡æ¯ï¼Œä¸»è¦æ˜¯å‘Šè¯‰eslintï¼Œè¯¥ruleçš„ç±»å‹ï¼Œæè¿°ã€å»ºè®®ã€å‚æ•°è§„èŒƒç­‰ã€‚

æ¥ä¸‹æ¥çš„createæ‰æ˜¯æ­£çœŸruleçš„æ ¸å¿ƒéƒ¨åˆ†ã€‚å…¶åŒ…å«ä¸€ä¸ªcontextï¼ŒåŒ…å«äº†eslintå°è£…çš„ç”¨äºå¤„ç†é…ç½®ã€æºä»£ç ã€æŸ¥æ‰¾ç­‰æ–¹æ³•ã€‚å…·ä½“å¯å‚è€ƒï¼š[eslint-context](https://eslint.org/docs/latest/extend/custom-rules#the-context-object)

createå¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡å†…åŒ…å«äº†ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯selectorï¼Œä¸€ä¸ªæ˜¯eslinté’©å­äº‹ä»¶ã€‚

selectorä¸»è¦å°±æ˜¯è§£æåçš„ast node,ç±»ä¼¼css selectorçš„å½¢å¼ã€‚eslinté’©å­ä¸»è¦åŒ…æ‹¬ï¼šonCodePathStartå’ŒonCodePathEndã€‚

selectorå¯ä»¥å‚è€ƒï¼š[eslint-rules](https://eslint.org/docs/latest/extend/custom-rules#rule-basics)
eventså¯ä»¥å‚è€ƒï¼š[code-path-analysis](https://eslint.org/docs/latest/extend/code-path-analysis)

äº†è§£ä¹‹åï¼Œè¿˜æ˜¯é‚£ä¸Šé¢çš„ä¸¾ä¾‹ã€‚

```javascript
module.exports = {
    rules: {
        'custom-rule': {
            meta: {
                type: 'suggestion', // `problem`, `suggestion`, or `layout`
                docs: {
                    description: "description",
                    categories: ['recommended'],
                    url: null, // URL to the documentation page for this rule
                },
                fixable: 'code', // Or `code` or `whitespace`
                schema: [
                    {
                        type: 'array',
                    }
                ], // Add a schema if the rule has options
            },
            create(context) {
                return {
                    'Identifier[name=add]': function (node) {
                        return node.report({
                            message: 'ä¸èƒ½ä»¥addå‘½å',
                            node,
                        })
                    }
                }
            }
        },
    }
}
```

eslintä¼šåœ¨Identifierå‘½åä¸ºaddå¤„æ‰§è¡Œcustom-ruleã€‚ç„¶åæŠ¥å‘Šé”™è¯¯ï¼šâ€œä¸èƒ½ä»¥addå‘½åâ€ã€‚

## å‚è€ƒé“¾æ¥

1. [ASTä¸å‰ç«¯å·¥ç¨‹åŒ–å®æˆ˜](https://zhuanlan.zhihu.com/p/77696194)
2. [Read JavaScript Source Code, Using an AST](https://www.digitalocean.com/community/tutorials/js-traversing-ast)
3. [ast-types](https://github.com/benjamn/ast-types/blob/master/src/def/core.ts)
4. [Where can I view all the eslint ast node types?](https://stackoverflow.com/questions/39665292/where-can-i-view-all-the-eslint-ast-node-types)
5. [estree-es5](https://github.com/estree/estree/blob/master/es5.md)
6. [recast](https://github.com/benjamn/recast/blob/master/README.md)
7. [eslint-rules](https://eslint.org/docs/latest/extend/custom-rules#the-context-object)
