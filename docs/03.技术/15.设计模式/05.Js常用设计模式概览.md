---
title: Js常用设计模式概览
date: 2022-11-29 11:41:20
permalink: /pages/16ba28/
categories:
  - 技术
  - 设计模式
tags:
  - 
---

# Js常用设计模式概览

读《javascript设计模式与开发实践》可知常见设计模式为：

策略模式、状态模式、命令模式、代理模式、中间人模式、模板方法模式、迭代器模式、适配器模式、装饰器模式、单例模式、
发布-订阅模式、工厂模式、组合模式、享元模式、职责链模式。

<!-- more -->

## 单例模式

保证类只被声明一次，减少多次创建的开销，同时可以延缓创建时间进一步提高性能。

适用于有且只需要单个实例的场景，如唯一的弹框、唯一的操作对象等等。操作统一集成在单例的内部，不需要和其它对象交互。

## 策略模式

定义一系列的算法，把他们一个个封装起来，并且使它们之间可以替换。将执行者与具体实现解耦，通过委托将实现交给策略。

各个策略相对独立，利用委托消减了复杂的分支判断。但过多的策略类存在一定的开销。

在js中，天生的多态性让策略模式变得十分简单。

## 状态模式

对一系列状态信息，把它们一个个封装起来，并且是它们之间通过某个状态联系起来。

状态封装成类后，状态切换相对独立，且状态信息清晰明了，增强了可读性。

状态和状态之间仍需要知道对方的存在，新增要给状态时，也需要更改最后一个状态的内部函数以保证状态的正确切换。

如果要切换状态的顺序，则会丢失开闭原则。因此，从一开始状态的切换规则进需要确定好，后期增加虽然变得简单，但仍需要修改源码。

## 享元模式

对内封装可共享的信息，对外动态改变独有信息。以求减少实例化数量，提高性能。

内部状态的划分可以遵循一下原则：

1. 内部状态存储于对象内部。
2. 内部状态可以被一些对象共享。
3. 内部状态独立于具体场景，通常不会改变。
4. 内部状态屈居于具体的场景，并根据场景而变化，外部状态不能被共享。

## 代理模式

代理模式在于将互相访问的两者之间解耦，同时赋予中间者更多个操作空间，一般对外暴露的接口和被调用对象保持一致。

例如，委托定时操作、增强原有功能，请求分流等等。看起来代理模式更像是对受访对象的加强。

代理的意义在于让代码符合开闭原则。

## 装饰器模式

在不改变原始对象的基础上通过替换的方式，增强功能。往往会形成一条调用链。是AOP的典型例子。

相较于代理模式：

代理模式的目的是，当直接访问本体不方便或者不符合需要时，为这个本体提供一个替代者。本地定义了关键功能，而代理提供或拒绝
它的访问，或者在访问本体之前做一些额外的事情。 装饰者模式的作用就是为对象动态加入行为。换句话说，代理模式强调一种关系（Proxy 与它的实体之间的关系），这种关系
可以静态的表达，也就是说，这种关系在一开始就可以被确定。而装饰者模式用于一开始不能确
定对象的全部功能时。代理模式通常只有一层代理本体的引用，而装饰者模式经常会形成一条
长长的装饰链。

## 职责链模式

解耦了请求发送者和 N 个接收者之间的复杂关系。可以手动指定起始节点，且添加、调整执行顺序变得轻而易举。

AOP可以实现职责链，也可以通过迭代器自动执行责任链，更加的自动化。

## 模板方法模式

将一系列具有固定性的执行流程进行封装，实例实现抽象类中的定义好的方法。

该模式的好处，在于照猫画虎，类型可以直接替换，且直接使用。同时可以通过钩子在执行流程中添加自定义的功能。

## 命令模式

消除发送者和请求接收者彼此之间的耦合关系。

命令模式常用于，带有撤回、前进、队列等场景中。在js中，代理模式和命令模式的实现方式几乎一致。

[详情见...](./10.命令模式.md)

## 组合模式

在命令模式的基础上，希望对命令进行组装形成层级结构，层层执行。

组装模式的好处是无需关心调度的层级关系，而是委托给各个命令自动执行。

## 中间人模式

将多对多关系转变为一对多关系，通过中间人的公共接口进行统一通信。减少了每个对象都需要维护其它对象的冗余。

## 发布订阅模式

将对象之间解耦，不在互相依赖。通过发布订阅的方式，对象可以实时获得通信。同中间人类似。

## 设计模式范式

1. 单一职责：一个操作中只有一个可以改变行为的要素。
2. 最少知识原则：一个对象应该尽可能减少对其它对象的了解。
3. 开放封闭原则：对扩展开放，对修改封闭。
4. 面向接口编程：保证对象的多态性。
